// WITH timestamp()/1000/60/60 AS now
CALL apoc.date.parse("25/10/16 9:00" ,"h","dd/MM/yy HH:mm") YIELD value as now

MATCH (a:Agreement)<-[:STEMS_FROM]-(m:MarginCall {callType:'Variation'})-[:FIRST]->(:Step {step:'Presented'})
WITH *, SPLIT(r.time, ' ')[0] + ' ' + a.notificationTime as rawUnadjustedTime
CALL apoc.date.parse(rawUnadjustedTime, "h", "dd/MM/yy HH:mm") YIELD value as unadjustedTime
WHERE unadjustedTime-now <= 24
CALL apoc.date.format(unadjustedTime, "h", "dd/MM/yy HH:mm") YIELD value as unadjustedFormatedTime 
SET m.notificationTime = unadjustedFormatedTime
